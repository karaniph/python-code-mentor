<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Successful - Python Code Mentor</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #f0f2f5;
            margin: 0;
            color: #333;
        }
        .card {
            background: white;
            padding: 2rem 3rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px;
        }
        .success-icon {
            color: #4caf50;
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        h1 {
            margin: 0 0 1rem;
        }
        .key-box {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 8px;
            font-family: monospace;
            font-size: 1.5rem;
            letter-spacing: 2px;
            color: #2c3e50;
            position: relative;
            cursor: pointer;
        }
        .key-box:hover {
            border-color: #adb5bd;
            background: #e9ecef;
        }
        .copy-hint {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="success-icon">ðŸŽ‰</div>
        <h1>Payment Successful!</h1>
        <p>Thank you for upgrading Python Code Mentor.</p>
        <p>Here is your unique Pro License Key:</p>
        <div class="key-box" onclick="copyKey()" id="licenseKey">Generating...</div>
        <div class="copy-hint" id="copyHint">Click to copy</div>
        <p><strong>To Activate:</strong><br>
            Open VS Code â†’ Run "Enter License Key" â†’ Paste the key above.</p>
    </div>
    <script>
        // CLIENT-SIDE KEY GENERATION
        // Note: In a real app, this should be done on a secure server.
        const SALT = 'PYTHON_MENTOR_SECURE_SALT_2025';
        function generateKey() {
            // 1. Generate random 4-char string (e.g. "A1B2")
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'; // No I, O, 1, 0
            let randomPart = '';
            for (let i = 0; i < 4; i++) {
                randomPart += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            // 2. Calculate Checksum
            const checksum = calculateChecksum(randomPart);
            // 3. Format: PRO-{RANDOM}-{CHECKSUM}
            return `PRO-${randomPart}-${checksum}`;
        }
        function calculateChecksum(input) {
            let str = input + SALT;
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            // Convert to hex and take last 4 chars
            const hex = Math.abs(hash).toString(16).toUpperCase().padStart(4, '0');
            return hex.substring(hex.length - 4);
        }
        function copyKey() {
            const key = document.getElementById('licenseKey').innerText;
            navigator.clipboard.writeText(key).then(() => {
                document.getElementById('copyHint').innerText = "Copied to clipboard!";
                document.getElementById('licenseKey').style.borderColor = "#4caf50";
                setTimeout(() => {
                    document.getElementById('copyHint').innerText = "Click to copy";
                    document.getElementById('licenseKey').style.borderColor = "#dee2e6";
                }, 2000);
            });
        }
        // Generate on load
        document.getElementById('licenseKey').innerText = generateKey();
    </script>
</body>
</html>
